{"message":"Not Found","documentation_url":"https://docs.github.com/rest/git/refs#get-all-references-in-a-namespace","status":"404","name":"dcafbbcfddaabfbce","url":"http://ybsz.yzu.edu.cn","showName":"扬大易班思政平台","appid":"com.dcafbbcfddaabfbce.pakeplus","icon":"","iconPath":"C:\\Users\\32980\\AppData\\Roaming\\com.pakeplus.pacbao\\tvgie76fhr.png","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.1","preview":"Android","platform":["1-1"],"width":412,"height":915,"desc":"","jsFile":[],"filterCss":"","customJs":"// very important, if you don't know what it is, don't touch it\n// 非常重要，不懂代码不要动，这里可以解决80%的问题，也可以生产1000+的bug\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    console.log('origin', origin, isBaseTargetBlank)\n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    location.href = url\n}\n\ndocument.addEventListener('click', hookClick, { capture: true })\n\n// intranet-check.js\n(() => {\n  // ===== 你只需要改这里 =====\n  const CHECK_URL = \"http://ybsz.yzu.edu.cn/\"; // 推荐同域；如果没有就换成 \"/api/ping\" 或者 \"http://intranet.xxx.local/ping\"\n  const TIMEOUT_MS = 2500;     // 超时就认为不在内网\n  const RETRY_INTERVAL_MS = 0; // 0=不自动重试；比如 5000 可每 5 秒自动重试\n  // ==========================\n\n  const state = {\n    overlayEl: null,\n    timer: null,\n    checking: false,\n  };\n\n  function injectStyles() {\n    if (document.getElementById(\"__pake_intranet_styles__\")) return;\n    const style = document.createElement(\"style\");\n    style.id = \"__pake_intranet_styles__\";\n    style.textContent = `\n      :root { color-scheme: light dark; }\n      .__pake_overlay__{\n        position:fixed; inset:0; z-index:2147483647;\n        display:flex; align-items:center; justify-content:center;\n        padding:24px;\n        background: rgba(10, 12, 16, .58);\n        backdrop-filter: blur(10px);\n        -webkit-backdrop-filter: blur(10px);\n      }\n      .__pake_card__{\n        width:min(520px, 100%);\n        border-radius: 20px;\n        padding: 22px 20px 18px;\n        background: rgba(255,255,255,.92);\n        color: #0b1220;\n        box-shadow: 0 18px 60px rgba(0,0,0,.28);\n        border: 1px solid rgba(255,255,255,.65);\n      }\n      @media (prefers-color-scheme: dark){\n        .__pake_card__{\n          background: rgba(18,22,30,.88);\n          color: #e9eef8;\n          border: 1px solid rgba(255,255,255,.10);\n        }\n        .__pake_sub__{ color: rgba(233,238,248,.70); }\n        .__pake_hint__{ color: rgba(233,238,248,.62); }\n        .__pake_btn__{ background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.12); color:#e9eef8; }\n        .__pake_btn_primary__{ background: #3b82f6; border-color:#3b82f6; color:white; }\n      }\n      .__pake_head__{ display:flex; align-items:center; gap:12px; margin-bottom: 12px; }\n      .__pake_icon__{\n        width:40px; height:40px; border-radius: 12px;\n        display:grid; place-items:center;\n        background: linear-gradient(135deg, rgba(59,130,246,.18), rgba(59,130,246,.08));\n        border: 1px solid rgba(59,130,246,.18);\n      }\n      .__pake_title__{ font-size: 18px; font-weight: 800; letter-spacing: .2px; }\n      .__pake_sub__{ margin: 8px 0 12px; font-size: 13px; line-height: 1.55; color: rgba(11,18,32,.70); }\n      .__pake_hint__{\n        margin: 0 0 16px;\n        font-size: 12px; line-height: 1.6;\n        color: rgba(11,18,32,.62);\n        padding: 10px 12px;\n        border-radius: 14px;\n        background: rgba(59,130,246,.08);\n        border: 1px solid rgba(59,130,246,.14);\n      }\n      .__pake_actions__{ display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap; }\n      .__pake_btn__{\n        appearance:none; -webkit-appearance:none;\n        border-radius: 14px;\n        padding: 10px 14px;\n        font-size: 13px; font-weight: 650;\n        border: 1px solid rgba(0,0,0,.08);\n        background: rgba(255,255,255,.72);\n        color: #0b1220;\n        cursor: pointer;\n        transition: transform .06s ease, filter .12s ease;\n        user-select: none;\n      }\n      .__pake_btn__:active{ transform: scale(.98); }\n      .__pake_btn__:disabled{ opacity:.65; cursor:not-allowed; }\n      .__pake_btn_primary__{\n        background: #2563eb;\n        border-color: #2563eb;\n        color: white;\n      }\n      .__pake_status__{\n        margin-top: 10px;\n        font-size: 12px;\n        color: rgba(11,18,32,.62);\n      }\n      @media (prefers-color-scheme: dark){\n        .__pake_status__{ color: rgba(233,238,248,.58); }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n\n  function createOverlay() {\n    injectStyles();\n    const overlay = document.createElement(\"div\");\n    overlay.className = \"__pake_overlay__\";\n    overlay.innerHTML = `\n      <div class=\"__pake_card__\" role=\"dialog\" aria-modal=\"true\" aria-label=\"网络环境检测失败\">\n        <div class=\"__pake_head__\">\n          <div class=\"__pake_icon__\" aria-hidden=\"true\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M12 9v4\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n              <path d=\"M12 17h.01\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\"/>\n              <path d=\"M10.29 3.86l-8.4 14.56A2 2 0 0 0 3.61 21h16.78a2 2 0 0 0 1.72-2.58L13.71 3.86a2 2 0 0 0-3.42 0Z\"\n                stroke=\"currentColor\" stroke-width=\"2\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n          <div>\n            <div class=\"__pake_title__\">无法访问内网环境</div>\n            <div class=\"__pake_sub__\">\n              当前网络似乎不在公司/内网（或 VPN 未连接），因此页面无法打开。\n            </div>\n          </div>\n        </div>\n\n        <div class=\"__pake_hint__\">\n          你可以尝试：连接公司 Wi-Fi / 打开 VPN / 切换网络后点击「重试」。\n          <br/>（检测地址：<code style=\"font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;\">${escapeHtml(\n            CHECK_URL\n          )}</code>）\n        </div>\n\n        <div class=\"__pake_actions__\">\n          <button class=\"__pake_btn__\" id=\"__pake_reload__\">刷新页面</button>\n          <button class=\"__pake_btn__ __pake_btn_primary__\" id=\"__pake_retry__\">重试检测</button>\n        </div>\n        <div class=\"__pake_status__\" id=\"__pake_status__\">等待重试…</div>\n      </div>\n    `;\n    overlay.querySelector(\"#__pake_reload__\").addEventListener(\"click\", () => location.reload());\n    overlay.querySelector(\"#__pake_retry__\").addEventListener(\"click\", () => checkNow(true));\n    return overlay;\n  }\n\n  function showOverlay(statusText) {\n    if (!state.overlayEl) {\n      state.overlayEl = createOverlay();\n      document.documentElement.appendChild(state.overlayEl);\n    }\n    setStatus(statusText || \"检测失败：不在内网 / 无法访问内网站点\");\n  }\n\n  function hideOverlay() {\n    if (state.overlayEl) {\n      state.overlayEl.remove();\n      state.overlayEl = null;\n    }\n  }\n\n  function setStatus(text) {\n    const el = state.overlayEl?.querySelector(\"#__pake_status__\");\n    if (el) el.textContent = text;\n  }\n\n  function escapeHtml(s) {\n    return String(s).replace(/[&<>\"']/g, (c) => ({ \"&\": \"&amp;\", \"<\": \"&lt;\", \">\": \"&gt;\", '\"': \"&quot;\", \"'\": \"&#39;\" }[c]));\n  }\n\n  async function probe(url, timeoutMs) {\n    const ctrl = new AbortController();\n    const t = setTimeout(() => ctrl.abort(), timeoutMs);\n\n    try {\n      // 说明：\n      // - mode:'no-cors' 在某些跨域场景能“发出请求但拿不到内容”，会导致永远 ok 不准；因此这里保持默认。\n      // - same-origin 的 /health 最可靠（不会被 CORS 卡住）\n      const res = await fetch(url, {\n        method: \"GET\",\n        cache: \"no-store\",\n        signal: ctrl.signal,\n        credentials: \"include\",\n      });\n\n      // 如果是跨域且被 CORS 拦了，可能直接 throw；能走到这里通常说明连得通\n      if (res && typeof res.status === \"number\") {\n        // 200-399 认为成功；401/403 也可能是“内网通但没登录”，一般仍然算“在内网”\n        if ((res.status >= 200 && res.status < 400) || res.status === 401 || res.status === 403) return true;\n        return false;\n      }\n      return true;\n    } catch (e) {\n      return false;\n    } finally {\n      clearTimeout(t);\n    }\n  }\n\n  async function checkNow(fromUserClick = false) {\n    if (state.checking) return;\n    state.checking = true;\n\n    if (fromUserClick) setStatus(\"正在重新检测网络环境…\");\n\n    const ok = await probe(CHECK_URL, TIMEOUT_MS);\n\n    state.checking = false;\n\n    if (ok) {\n      hideOverlay();\n      // 可选：成功后提示一下（不想要就删掉）\n      // console.log(\"[intranet-check] OK\");\n    } else {\n      showOverlay(\"检测失败：请连接内网或开启 VPN，然后重试。\");\n      if (RETRY_INTERVAL_MS > 0) {\n        clearTimeout(state.timer);\n        state.timer = setTimeout(() => checkNow(false), RETRY_INTERVAL_MS);\n      }\n    }\n  }\n\n  function boot() {\n    // 页面刚加载就检测一次\n    checkNow(false);\n\n    // 网络状态变化时也检测\n    window.addEventListener(\"online\", () => checkNow(false));\n    window.addEventListener(\"offline\", () => showOverlay(\"当前设备离线：请检查网络后重试。\"));\n\n    // 可选：如果你希望页面“永远挡住直到检测通过”，可以在启动时先 showOverlay 再检测\n    // showOverlay(\"正在检测内网环境…\");\n    // checkNow(false);\n  }\n\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", boot, { once: true });\n  } else {\n    boot();\n  }\n})();\n","isHtml":false,"htmlPath":"","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v2.1.8","iosRepo":"PakePlus-iOS-v2.1.8","androidRepo":"PakePlus-Android-v2.1.8","more":{"windows":{"label":"dcafbbcfddaabfbce","title":"扬大易班思政平台","url":"http://ybsz.yzu.edu.cn","userAgent":"Mozilla/5.0 (Linux; Android 14; Pixel 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36","width":412,"height":915,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"fullScreen":false,"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"dcafbbcfddaabfbce","showName":"扬大易班思政平台","version":"0.0.1","webUrl":"http://ybsz.yzu.edu.cn","id":"com.dcafbbcfddaabfbce.pakeplus.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":false,"debug":false,"safeArea":"all"},"android":{"name":"dcafbbcfddaabfbce","showName":"扬大易班思政平台","version":"0.0.1","webUrl":"http://ybsz.yzu.edu.cn","id":"com.dcafbbcfddaabfbce.pakeplus.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":false,"debug":false,"safeArea":"all"},"desktop":{"name":"dcafbbcfddaabfbce","showName":"扬大易班思政平台","version":"0.0.1","id":"com.dcafbbcfddaabfbce.pakeplus.desktop","desc":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","webUrl":"http://ybsz.yzu.edu.cn","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":false}}